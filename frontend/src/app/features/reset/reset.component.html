<div class="reset-container">
  <h1 class="reset-title">RESET PASSWORD</h1>
  <p class="reset-subtitle">Enter your email and new password below</p>

  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
    <!-- EMAIL -->
    <div class="input-field">
      <div class="input-icon">
        <!-- Icône email -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2a9d8f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
      </div>
      <input type="email" formControlName="email" placeholder="Enter your email" />
    </div>
    <div *ngIf="emailControl?.touched && emailControl?.errors">
      <div class="error-message" *ngIf="emailControl!.errors?.['required']">Email is required.</div>
      <div class="error-message" *ngIf="emailControl!.errors?.['email']">Invalid email format.</div>
    </div>

    <!-- PASSWORD -->
    <div class="input-field">
      <div class="input-icon">
        <!-- Icône mot de passe -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2a9d8f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
      </div>
      <input type="password" formControlName="password" placeholder="Create new password" />
    </div>
    <div *ngIf="passwordControl?.touched && passwordControl?.errors">
      <div class="error-message">{{ getPasswordErrorMessage() }}</div>
    </div>

    <!-- CONFIRM PASSWORD -->
    <div class="input-field">
      <div class="input-icon">
        <!-- Icône confirmation -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2a9d8f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
      </div>
      <input type="password" formControlName="confirmPassword" placeholder="Confirm your password" />
    </div>
    <div *ngIf="confirmPasswordControl?.touched && confirmPasswordControl?.errors">
      <div class="error-message" *ngIf="confirmPasswordControl!.errors?.['required']">Password confirmation is required.</div>
      <div class="error-message" *ngIf="confirmPasswordControl!.errors?.['mismatch']">Passwords do not match.</div>
    </div>


    <!-- MESSAGES -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

    <!-- BUTTON -->
    <button type="submit" class="reset-button" [disabled]="loading">
      <span *ngIf="!loading">CHANGE PASSWORD</span>
      <span *ngIf="loading" class="spinner"></span>
    </button>

    <!-- LINK -->
    <div class="back-link">
      <a routerLink="/login">Back to login</a>
    </div>
  </form>
</div>
